{{- $ns := .Release.Namespace -}}
{{- $ingressName := printf "%s-%s" .Release.Name .Chart.Name -}}
{{- $serviceName := printf "%s-%s-ext" .Release.Name .Chart.Name -}}
NS: {{ $ns }}
ING: {{ $ingressName }}
SVC: {{ $serviceName }}
Thank you for installing HCL Domino server.

The release is named "{{ .Release.Name }}".
All components were installed into the namespace "{{ $ns }}".

Server name: {{ .Values.domino.server.name }}/{{ .Values.domino.server.domainName }}
Host name:   {{ .Values.domino.network.hostName }}

----

Please wait a few seconds until the Domino server is fully initialized.
After installation is complete, you can access the server.

{{ if .Values.ingress.enabled -}}
üåê ACCESS - WEB TRAFFIC
Domino is configured to use an Ingress Controller as a reverse proxy for its web interface:
Ingress class: {{ .Values.ingress.class }}
IP Address:
  Run this command and get the IP:
    $ kubectl get --namespace {{ $ns }} ingress {{ $ingressName }}  -o jsonpath="{.status.loadBalancer.ingress[0].ip}"
{{- if (lookup "networking.k8s.io/v1" "Ingress" $ns $ingressName) -}}
  {{ (first (lookup "networking.k8s.io/v1" "Ingress" $ns $ingressName).status.loadBalancer.ingress).ip | nindent 4 -}}
{{- end }}
Protocols:
  HTTP (port 80)
  HTTPS (port 443)
{{- end }}

{{ if .Values.service.enabled -}}
üñ•Ô∏è  ACCESS - NON WEB TRAFFIC
Domino is configured to use a service type {{ .Values.service.type | quote }} to expose its protocols:
IP Address: 
  Run this command and get the IP:
{{- if eq .Values.service.type "LoadBalancer" -}}
    {{ nindent 4 "" }}$ kubectl get --namespace {{ $ns }} service {{ $serviceName }} -o jsonpath="{.status.loadBalancer.ingress[0].ip}"
{{- if (lookup "v1" "Service" $ns $serviceName) -}}
{{ (first (lookup "v1" "Service" $ns $serviceName).status.loadBalancer.ingress).ip | nindent 4 }}
{{- end }}
{{- end }}
{{- if eq .Values.service.type "ClusterIP" -}}
    {{ nindent 4 "" }}$ kubectl get --namespace {{ $ns }} service {{ $serviceName }} -o jsonpath="{.spec.externalIPs[0]}"
{{- if (lookup "v1" "Service" $ns $serviceName) -}}
{{ (first (lookup "v1" "Service" $ns $serviceName).spec.externalIPs) | nindent 4 }}
{{- end }}
{{- end }}
Protocols:
  {{ if .Values.service.http.expose }}HTTP (port {{ .Values.service.http.port }}){{ end }}
  {{ if .Values.service.https.expose }}HTTPS (port {{ .Values.service.https.port }}){{ end }}
  {{ if .Values.service.nrpc.expose }}NRPC (port {{ .Values.service.nrpc.port }}){{ end }}
{{- end }}

‚ÑπÔ∏è  NOTE:
You can use the IP addresses directly (in a web browser or a Noites client), if you deployed the server on a public Kubernetes provider.
If you deployed it in your own environment, you would probably need to configure your firewall, load balancers and DNS server to forward Domino traffic to this IPs.
